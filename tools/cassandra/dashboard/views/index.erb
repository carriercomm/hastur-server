<html>
  <head>
    <title>Hastur Stats</title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
   
    <script type="text/javascript" src="http://people.iola.dk/olau/flot/jquery.flot.js"></script>
    <script type="text/javascript" src="http://people.iola.dk/olau/flot/jquery.flot.selection.js"></script>
    <script type="text/javascript" src="http://people.iola.dk/olau/flot/jquery.flot.navigate.js"></script>
    
    <script type="text/javascript" src="/js/flot_utils.js"></script>

    <style type="text/css">
      #placeholder .button {
        position: absolute;
        cursor: pointer;
      }

      #placeholder div.button {
        font-size: smaller;
        color: #999;
        background-color: #eee;
        padding: 2px;
      }

      ul li { 
        padding: 0.5em 0.5em 0.5em 0.5em; 
        list-style: none;
        border: dotted 1px gray; 
        margin: 0.2em 0.2em 0.2em 0.2em;
        width: 500px;
        float: left;
        list-style-type: none; 
      }

      ul { 
        padding-left:0.25em; 
      }

      .ui-state-highlight {
        height: 325px;
        line-height: 1.2em;
        background-color: yellow;
      }

      .headerSpan {
        padding-right: 5px;
        padding-left: 5px;
      }

      input.text {
        margin-bottom:12px;
        width:95%;
        padding: 0.4em;
      }
    </style>

    <script>
      var graphArray = new Array();
      function addGraph(parentId) {
        var hf = new HasturFlot(parentId, "graph-"+(new Date()).getTime());
        hf.init();
        graphArray[ graphArray.length ] = hf;
      }

      $(function() {
        $( "#graphDiv" ).sortable( {
          placeholder: "ui-state-highlight",
          forcePlaceholderSize: true
        } );
        $( "#graphDiv" ).disableSelection();

        $("#save-form").hide();
        $("#saveImg").click(function() {
          $("#save-form").show(1000);
        });
        $("#saveButton").click(function() {
          var dashboard = $("#dashboard").val();
          var serial = JSON.stringify(graphArray);
          var arry = JSON.parse(serial);
          for(e in arry) {
            var hf = new HasturFlot('graphDiv2', "graph2-"+(new Date()).getTime(), arry[e]);
            hf.init();
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="dashboardControlsDiv">
      <span onclick="addGraph( 'graphDiv' )"> <b>+</b> </span>
      <img id="saveImg" name="Save", src="/images/save.jpg" border=0 width=10px height=10px />

      <div id='save-form' title="Save Dashboard">
        <label for="name">Name</label>
        <input type="text" id="dashboardName" name="name" maxLength="128" size="64" />
        <button id="saveButton">Save Dashboard</button>
      </div>
    </div>

    <ul id="graphDiv"></ul>
    <ul id="graphDiv2"></ul>
  <!--
    <div id="flotWidget">
      <span>Hosts</span>
      <select id="hostname_ddl">
        <% hostnames.each do |uuid, hostname| %>
          <option value=<%= "\"#{uuid}\"" %>><%= "\"#{hostname}\"" %></option>
        <% end%>
      </select>
      <span>Stats</span>
      <select id="statNameDdl"></select>
  	  <input id="enableTooltip" type="checkbox" checked="checked">Tooltip</input>
    </div>
   
    <div>
      <span>Zoom</span>
      <span id="oneHour" style="color:lightblue">1h</span>
      <span id="threeHour" style="color:lightblue">3h</span>
      <span id="sixHour" style="color:lightblue">6h</span>
      <span id="twelveHour" style="color:lightblue">12h</span>
      <span id="day" style="color:lightblue">1d</span>
      <span id="threeDay" style="color:lightblue">3d</span>
    </div>

    <div id="placeholder" style="width:1000px;height:500px"></div>
  	<div>
      <button id="full_refresh">Full Refresh</button>
      <button id="replot">Re-plot</button>
    </div>
    -->

  </body>
</html>
